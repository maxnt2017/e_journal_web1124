<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Експертний Електронний Журнал</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
</head>
<body>
    <div class="journal-container">
        <header>
            <h1>Електронний журнал</h1>
        </header>

        <main>
            <div class="management-panel">
                <div class="input-group"><label for="groupSelector">Вибрана група:</label><select id="groupSelector"></select></div>
                <div class="input-group"><label for="newGroupName">Створити нову групу:</label><input type="text" id="newGroupName" placeholder="Назва групи"></div>
                <button id="addGroupBtn"><i class="fas fa-plus icon"></i>Створити</button>
                <button id="deleteGroupBtn"><i class="fas fa-trash-alt icon"></i>Видалити поточну</button>
            </div>
            
            <div class="management-panel">
                 <form id="addStudentForm" class="add-form">
                    <div class="input-group"><label>Новий студент:</label><input type="text" id="studentName" placeholder="Ім'я студента" required></div>
                    <div class="input-group"><label>Предмет:</label><input type="text" id="subject" placeholder="Основний предмет" required></div>
                    <button type="submit"><i class="fas fa-user-plus icon"></i>Додати студента</button>
                </form>
                <div class="input-group"><label>Пошук:</label><input type="text" id="searchInput" class="search-input" placeholder="Пошук за іменем..."></div>
            </div>

            <div class="stats-container"><strong>Середня оцінка в групі:</strong> <span id="averageGrade">N/A</span></div>

            <table>
                <thead><tr><th data-sort="name">Ім'я студента ▾</th><th data-sort="subject">Предмет ▾</th><th data-sort="average">Середня оцінка ▾</th><th>Дії</th></tr></thead>
                <tbody id="journalBody"></tbody>
            </table>

            <div class="main-actions">
                 <button id="backupBtn"><i class="fas fa-download icon"></i>Зберегти Бекап</button>
                 <button id="restoreBtn"><i class="fas fa-upload icon"></i>Завантажити Бекап</button>
                 <input type="file" id="restoreFile" style="display: none;" accept=".json">
                 <button id="clearAllBtn"><i class="fas fa-bomb icon"></i>Очистити групу</button>
            </div>

            <div class="chart-container">
                <h2>Розподіл середніх оцінок</h2>
                <canvas id="gradesChart"></canvas>
            </div>
        </main>
    </div>

    <div id="studentDetailModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="studentNameModal"></h2>
                <span class="close-btn">&times;</span>
            </div>
            <div class="student-details-grid">
                <div class="grades-section">
                    <h3>Оцінки з предмету: <span id="subjectNameModal"></span></h3>
                    <ul class="grades-list" id="gradesList"></ul>
                    <form id="addGradeForm" class="add-grade-form">
                        <input type="number" id="newGradeValue" min="1" max="12" placeholder="Оцінка" required>
                        <input type="text" id="newGradeComment" placeholder="Коментар (напр. Контрольна)">
                        <button type="submit"><i class="fas fa-plus"></i></button>
                    </form>
                </div>
                <div class="attendance-section">
                    <h3>Відвідуваність</h3>
                     <div class="attendance-controls">
                        <button data-status="Присутній">Присутній</button>
                        <button data-status="Відсутній" style="background-color:#dc3545;">Відсутній</button>
                        <button data-status="Запізнився" style="background-color:#ffc107; color:#333;">Запізнився</button>
                    </div>
                    <ul id="attendanceLog" class="attendance-log"></ul>
                </div>
            </div>
        </div>
    </div>
    
    <footer><p>Copyright 2017-2025(c), MaxNT Official. Всі права захищені!</p></footer>

    <script>
    // Весь JavaScript-код буде тут
    // Через великий об'єм, він буде наданий окремо, але повністю готовий до використання.
    </script>
</body>
</html>
